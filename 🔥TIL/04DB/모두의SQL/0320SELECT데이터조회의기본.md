# 0320 MON

## 🫠 1장 관계형 데이터베이스와 SQL

### @ 데이터의 중요성

- 데이터 분석 과정 ; 문제 인식 > **데이터 수집과 가공 > 데이터 분석** (전처리 영역 ; SQL 적용 가능 영역) > 분석 결과 실행

- 정형 데이터 (strutctured data)

  - 틀이 잡혀있고 체계화된 데이터

  - 높은 안정성, 유연하지 못한 구조

  - 대부분 기업의 업무용 데이터베이스

  - 오라클 데이터베이스 ; 정형 데이터를 다루는 관계형 데이터베이스 식스템 (RDBMS)

- 비정형 데이터 (unstructured data)

  - 틀이 잡혀 있지 않고 사전 정의가 없는 데이터

  - 다양하고 방대한 양의 데이터, 별도의 분석 처리 기술 필요

  - 텍스트, 이미지, 음원 데이터, 빅데이터 등

- 데이터베이스

  - DB(DataBase)와 이를 관리하는 시스템인 DBMS(DataBase Management System)으로 구분

  - 관계형 데이터베이스

    - 열과 행을 갖는 2차원 테이블을 중심으로 설계된 데이터베이스

    - 수많은 데이터를 '키'와 '관계'라는 연결 고리로 연결하여 원하는 데이터를 조회하고 가공하는 방식의 데이터베이스

  - 계층형 데이터베이스

    - 가장 오래된 형태의 데이터베이스

    - 개인 컴퓨터 저장 장치에서 주로 사용하는 방식

    - 직관적

  - 객체 지향 데이터베이스

    - 객체와 객체 식별자, 속성과 메서드, 클래스, 클래스 계층 및 상속, 복합 객체 등 객체 지향 데이터 모델을 지원하는 데이터베이스

    - 애플리케이션 개발을 위한 프로그래밍 언어인 자바와 C++ 같은 객체 지향 언어의 객체 지향 프로그래밍에 적합한 데이터베이스

  - XML 데이터베이스

    - W3C(World Wide Web Consortium)의 XML 표준 문서 구조를 계층형 트리 형태로 저장하거나 관리하기 위해 만든 데이터베이스

    - 데이터 중심 기반 또는 XML 문서 중심의 데이터베이스

    - 기본이 되는 XML 문서 형태로 저장/검증하며 문서 단위, 요소 단위 검색 기능, 검색어 색인 저장 기술 활용

    - 데이터 처리 위해 XQuery라는 언어 사용

- SQL

  - 관계형 데이터베이스 조작하기 위해 만들어진 표준 언어 ; 데이터베이스 관리 시스템(DBMS)과 통신하기 위한 언어
  
  - 특징

    1. 사용하기 쉽다 ; 구조와 문법 체계가 직관적이며 익히기 쉬움

    2. 절차가 없는 비절차적 언어 ; 실행 순서와 관계없이 처리 내용 기술

    3. 관계형 데이터베이스의 데이터 조작 가능 ; 데이터를 정의, 검색, 조작 가능

    4. 표준 언어 ; 데이터베이스뿐만 아니라 다양한 분야에서 응용 가능

  - 명령어 종류

    - 데이터 조작어 (DML, Data Manipulation Language) ; 데이터베이스에서 데이터를 검색(SELECT), 데이터베이스 테이블에서 새로운 행을 삽입(INSERT), 기존의 행 수정(UPDATE)하거나 삭제(DELETE)

      - SELECT

      - INSERT

      - UPDATE

      - DELETE

    - 데이터 정의어 (DDL, Data Definition Language) ; 테이블의 데이터를 정의하고 구조를 생성하거나 수정 또는 제거

      - CREATE

      - ALTER

      - DROP

      - RENAME

      - TRUNCATE

    - 데이터 제어어 (DCL, Data Control Language) ; 데이터베이스에 대해 접근 권한 부여하거나 제거

      - GRANT

      - REVOKE

    - 트랜젝션 제어어 (TCL, Transaction Control Language) ; DML로 실행한 변경 사항 저장 관리

      - COMMIT

      - ROLLBACK

      - SAVEPOINT

  - SQL로 할 수 있는 것과 활용 영역

    1. 애플리케이션 개발에 사용 (데이터 처리)

    2. 데이터 추출, 수집, 가공 가능

    3. 데이터 검색, 분석

### @ 관계형 데이터베이스의 구성 요소

1. 테이블, 뷰, 인덱스 등의 객체

  - 테이블 ; 행과 열로 구성된 기본적인 데이터의 저장 단위

    - 역할

      1. 데이터 저장, 관리

      2. 데이터의 접근을 통제하고 검색, 삽입, 수정, 삭제 위한 체계 제공

    - 구성

      - 열
      
        - 수직 항목
        
        - 데이터 속성을 대표하는 한 종류의 데이터 타입만을 가짐

        - 하나의 열에는 문자와 숫자 타입의 데이터 섞어 쓸 수 없음

      - 행

        - 수평 항목

        - 각 항목의 개별 값

  - 뷰 ; 하나 이상의 테이블로부터 데이터를 선택하여 만든 부분 집합이자 가상의 테이블

  - 인덱스 ; 주소를 사용하여 행을 빠르게 검색 가능

  - 시퀀스 ; 고유한 번호를 자동으로 생성 (주로 키 생성하는 데 사용)

  - 동의어 ; 관리 편의성과 보안을 위해 객체에 별칭 부여

2. 데이터를 저장하는 개체와 관계들의 집합

3. 일관성, 정확성, 신뢰성을 위한 트랜잭션, 무결성, 동시성 제어 등의 개념

## 🤯 3장 SELECT: 데이터 조회의 기본

### @ SELECT문의 기본 문법

#### 0. SELCT문의 기초

```SQL
SELECT      [DISTINCT] 열 이름 [or 별칭(alias)]
FROM        테이블 이름
[WHERE      조건식]
[ORDER BY   열 이름 [ASC or DESC]];
```

1. SELECT 열 이름 FROM 테이블 이름 ; 필수 입력

2. SELECT FROM

    - 시스템에서 명령문 실행하기 위해 미리 정해 놓은 예약어

    - 예약어는 시스템이 미리 정해 놓은 것 ; 테이블 명으로 사용 불가

    - 예약어이면서 열을 선택하기 위한 명령어

3. 대괄호([]) 안에 들어간 항목 ; 선택 사항, 생략 가능

4. 문장 모두 작성 시 세미콜론(;) 입력 ; 한 문장의 경우 입력하지 않아도 실행됨

#### 1. SQL문 작성 규칙

```SQL
SELECT *
FROM employees A,
  (
    SELECT *
    FROM departments
    WHERE department_id = 20
  ) B
WHERE A.department_id = B.department_id;
```

1. 대소문자 구별 X

2. 한 줄 또는 여러 줄로 작성 가능

    - 가독성 및 편집의 용이성 위해 내용 달라지면 줄 나눔

    - 명령어는 여러 줄로 나눌 수 X ; SEL ECT 불가

3. 읽기 쉽게 하기 위해 코드 수준에 따른 들여쓰기

4. 명령어를 대문자로 작성하고 나머지를 소문자로 작성하면 가독성 좋아짐

#### 2. 전체 데이터 조회하기

```SQL
SELECT *
FROM employees;
```

- SELECT 명령어 다음에 별표(*)를 입력해서 모든 열 조회

- FROM은 '~ 테이블로부터₩라는 의미 ; 바로 뒤에 테이블 이름 기술

  > 따라서 위 SQL문은 employees 테이블로부터 모든 열을 조회하라는 의미!

- 명령어는 대문자로, 나머지는 소문자로

- 가독성 위해 SELECT절 다음 ENTER를 입력하여 FROM절과 구분

- SELECT 명령어는 데이터를 '선택(=조회)한다'는 의미 > 선택된 데이터를 화면에 출력한다는 것 ; 출력만 할 뿐 실제 데이터의 값이 데이터베이스에 반영되지는 않음

#### 3. 원하는 열만 조회하고 정렬하기

```SQL
SELECT employee_id, first_name, last_name
FROM employees
ORDER BY employee_id DESC;
```

- SELECT 명령문 뒤에 나열한 열 이름 순서대로 결과가 조회됨

- 열 이름은 쉼표(,) 붙여 계속해서 나열 가능 ; 결과는 나열한 순서대로 출력

- ORDER BY ; 출력 결과 반대로 정렬

  ```SQL
  ORDER BY 열 이름 [ASC(오름차순) or DESC(내림차순)]
  ```

#### 4. 중복된 출력 값 제거하기 [DISTINCT]

```SQL
SELECT DISTINCT job_id
FROM employees;
```

- 중복된 행 제거 후 출력 > 중복된 행을 제거하고 싶은 열 앞에 DISTINCT 명령어 기술

- DISTINCT 명령어 뒤에 열 이름 계속 나열하면 **나열한 순서대로 모두 적용**되는 것에 유의

#### 5. SQL문을 효율적으로 작성하기 위해 별칭 사용하기 [AS]

```SQL
SELECT employee_id AS 사원번호, first_name AS 이름, last_name AS 성
FROM employees;
```

- 별칭 (alias)

- 원래 명명된 열 이름 외에 열 이름으로 임의로 바꿔쓰고자 할 때 사용

- SELECT 문에 기술 시 생략 가능 but 가독성 필요한 경우 사용할 것을 권장

- 특징

  - 임시 변경 ; 원래 열 이름이 물리적으로 영원히 변경되는 것 아님

  - 열 이름 바로 뒤에 사용

  - 별칭에 공백, 특수문자, 대소문자 등 사용하려면 "Emp Id"처럼 큰따옴표(")로 묶어서 사용

#### 6. 데이터 값 연결하기 [||]

```SQL
SELECT employee_id,
  first_name||' '||last_name,
  email||'@'||'company.com'
FROM employees;
```

- 각 열에 따로 담겨 있는 데이터 값을 하나로 붙이거나 추가 수식을 붙여 출력하는 경우 사용

- [열 이름]||[열 이름] or [열 이름]||'[문자]'

- 